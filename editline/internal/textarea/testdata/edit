run
focus
insert "hello, world!"
----
-- view:
‚îÉ  1 hello, world![7m [0m                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá

# Erase previous char
run observe=(view,pos,value)
key ctrl+h
----
-- view:
‚îÉ  1 hello, world[7m [0m                      ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 12, (row 0, col 12, lastCharOffset 0)
LineInfo: {Width:13 CharWidth:13 Height:1 StartColumn:0 ColumnOffset:12 RowOffset:0 CharOffset:12}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"hello, world"

# Erase next char from end of line: no-op.
run observe=(view,pos,value)
key delete
----
-- view:
‚îÉ  1 hello, world[7m [0m                      ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 12, (row 0, col 12, lastCharOffset 0)
LineInfo: {Width:13 CharWidth:13 Height:1 StartColumn:0 ColumnOffset:12 RowOffset:0 CharOffset:12}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"hello, world"

# Left, then erase next char: arrive to end of line.
run observe=(view,pos,value)
key left
key delete
----
-- view:
‚îÉ  1 hello, worl[7m [0m                       ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 11, (row 0, col 11, lastCharOffset 0)
LineInfo: {Width:12 CharWidth:12 Height:1 StartColumn:0 ColumnOffset:11 RowOffset:0 CharOffset:11}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"hello, worl"

# Erase previous word.
run observe=(view,pos,value)
key ctrl+w
----
-- view:
‚îÉ  1 hello, [7m [0m                           ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 7, (row 0, col 7, lastCharOffset 0)
LineInfo: {Width:8 CharWidth:8 Height:1 StartColumn:0 ColumnOffset:7 RowOffset:0 CharOffset:7}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"hello, "

# Add some words, then move to begin and delete next word.
run observe=(view,pos,value)
type more text
key ctrl+a
key alt+d
----
-- view:
‚îÉ  1 [7m [0mmore text                         ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:11 CharWidth:11 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
" more text"

# Add some text.
run observe=(view,pos,value)
type Some
----
-- view:
‚îÉ  1 Some[7m [0mmore text                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 4, (row 0, col 4, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:4 RowOffset:0 CharOffset:4}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"Some more text"

# Uppercase next word.
run observe=(view,pos,value)
key alt+u
----
-- view:
‚îÉ  1 Some MORE[7m [0mtext                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 9, (row 0, col 9, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:9 RowOffset:0 CharOffset:9}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"Some MORE text"

# Title next word.
run observe=(view,pos,value)
key alt+c
----
-- view:
‚îÉ  1 Some MORE Text[7m [0m                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 14, (row 0, col 14, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:14 RowOffset:0 CharOffset:14}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"Some MORE Text"

# Lowercase words.
run observe=(view,pos,value)
key ctrl+a
key alt+l
key alt+l
key alt+l
----
-- view:
‚îÉ  1 some more text[7m [0m                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 14, (row 0, col 14, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:14 RowOffset:0 CharOffset:14}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"some more text"

# Word-based changes are no-op at the end of the line.
run observe=(view,pos,value)
key alt+c
key alt+u
key alt+l
----
-- view:
‚îÉ  1 some more text[7m [0m                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 14, (row 0, col 14, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:14 RowOffset:0 CharOffset:14}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"some more text"

# Transpose
run observe=(view,pos,value)
key ctrl+a
key right
key ctrl+t
----
-- view:
‚îÉ  1 os[7mm[0me more text                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 2, (row 0, col 2, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:2 RowOffset:0 CharOffset:2}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"osme more text"

# Multiple transpose inputs bring the current character to the right via transpositions.
run observe=(view,pos,value)
key ctrl+t
key ctrl+t
----
-- view:
‚îÉ  1 omes[7m [0mmore text                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 4, (row 0, col 4, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:4 RowOffset:0 CharOffset:4}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"omes more text"

# Split a line in two.
run observe=(view,pos,value)
key enter
----
-- view:
‚îÉ  1 omes                               ‚ê§
‚îÉ  2 [7m [0mmore text                         ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 1, Pos 0, (row 1, col 0, lastCharOffset 0)
LineInfo: {Width:11 CharWidth:11 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: false, AtLastLineOfInputAndView: true
-- value:
"omes\n more text"

# Merge two lines back together.
run observe=(view,pos,value)
key ctrl+h
----
-- view:
‚îÉ  1 omes[7m [0mmore text                     ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 4, (row 0, col 4, lastCharOffset 0)
LineInfo: {Width:15 CharWidth:15 Height:1 StartColumn:0 ColumnOffset:4 RowOffset:0 CharOffset:4}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"omes more text"

# Delete to end of line.
run observe=(view,pos,value)
key ctrl+k
----
-- view:
‚îÉ  1 omes[7m [0m                              ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 4, (row 0, col 4, lastCharOffset 0)
LineInfo: {Width:5 CharWidth:5 Height:1 StartColumn:0 ColumnOffset:4 RowOffset:0 CharOffset:4}
AtBeginningOfLine: false, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"omes"


# Delete to beginning of line.
run observe=(view,pos,value)
key ctrl+u
----
-- view:
‚îÉ  1 [7m [0m                                  ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:1 CharWidth:1 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
""

# Delete next/prev work on empty input.
run observe=(view,pos,value)
key ctrl+w
----
-- view:
‚îÉ  1 [7m [0m                                  ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:1 CharWidth:1 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
""

run observe=(view,pos,value)
key alt+d
----
-- view:
‚îÉ  1 [7m [0m                                  ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:1 CharWidth:1 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
""

# Delete next word when the next word is on the next line, moves
# the line up.
run observe=(view,pos,value)
insert "first line\nsecondline"
movetobegin
key alt+d
key alt+d
----
-- view:
‚îÉ  1 [7m [0m                                  ‚ê§
‚îÉ  2 secondline                         ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:1 CharWidth:1 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: false
-- value:
"\nsecondline"

run observe=(view,pos,value)
key alt+d
----
-- view:
‚îÉ  1 [7ms[0mecondline                         ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:11 CharWidth:11 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"secondline"

# Delete prev word from beginning of line.
run observe=(view,pos,value)
key enter
key ctrl+w
----
-- view:
‚îÉ  1 [7ms[0mecondline                         ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:11 CharWidth:11 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"secondline"


# Transpose on first char: no-op.
run observe=(view,pos,value)
setvalue "hello"
movetobegin
key ctrl+a
key ctrl+t
----
-- view:
‚îÉ  1 [7mh[0mello                              ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    ‚ê§
‚îÉ  ~                                    üõá
-- pos:
Line: 0, Pos 0, (row 0, col 0, lastCharOffset 0)
LineInfo: {Width:6 CharWidth:6 Height:1 StartColumn:0 ColumnOffset:0 RowOffset:0 CharOffset:0}
AtBeginningOfLine: true, AtFirstLineOfInputAndView: true, AtLastLineOfInputAndView: true
-- value:
"hello"
